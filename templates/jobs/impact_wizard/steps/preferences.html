<!-- Step 6: Preferences -->
<div>
    <div class="text-center mb-8">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-3">
            What matters to you in a role?
        </h2>
        <p class="text-gray-600">Help us find roles that fit your lifestyle</p>
    </div>

    <form hx-post="{% url 'jobs:impact_wizard_step' 'preferences' %}"
          hx-target="#wizard-content"
          hx-swap="innerHTML">
        {% csrf_token %}

        <!-- Remote Preference -->
        <div class="mb-8">
            <label class="block text-sm font-semibold text-gray-700 mb-3">Remote preference</label>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                {% for value, label in remote_choices %}
                <label class="cursor-pointer">
                    <input type="radio"
                           name="remote_preference"
                           value="{{ value }}"
                           {% if profile.remote_preference == value %}checked{% endif %}
                           class="peer sr-only">
                    <div class="p-3 text-center text-sm rounded-xl border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">
                        {{ label }}
                    </div>
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- Job Types -->
        <div class="mb-8">
            <label class="block text-sm font-semibold text-gray-700 mb-3">Job types (select all that apply)</label>
            <div class="flex flex-wrap gap-2">
                {% for value, label in job_types %}
                <label class="cursor-pointer">
                    <input type="checkbox"
                           name="job_types"
                           value="{{ value }}"
                           {% if value in profile.job_types %}checked{% endif %}
                           class="peer sr-only">
                    <span class="inline-block px-4 py-2 text-sm rounded-full border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">
                        {{ label }}
                    </span>
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- Salary Range -->
        <div class="mb-8">
            <label class="block text-sm font-semibold text-gray-700 mb-3">Salary expectations (USD/year, optional)</label>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-xs text-gray-500 mb-1">Minimum</label>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">$</span>
                        <input type="text"
                               name="salary_min"
                               value="{% if profile.salary_min %}{{ profile.salary_min }}{% endif %}"
                               placeholder="50,000"
                               class="w-full pl-8 pr-4 py-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-900 placeholder-gray-400 focus:border-brand-500 focus:bg-white focus:ring-1 focus:ring-brand-500 transition">
                    </div>
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-1">Maximum</label>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">$</span>
                        <input type="text"
                               name="salary_max"
                               value="{% if profile.salary_max %}{{ profile.salary_max }}{% endif %}"
                               placeholder="120,000"
                               class="w-full pl-8 pr-4 py-3 rounded-xl bg-gray-50 border border-gray-200 text-gray-900 placeholder-gray-400 focus:border-brand-500 focus:bg-white focus:ring-1 focus:ring-brand-500 transition">
                    </div>
                </div>
            </div>
        </div>

        <!-- Location Preferences -->
        <div class="mb-8">
            <label class="block text-sm font-semibold text-gray-700 mb-3">Location preferences (optional)</label>
            <div class="flex flex-wrap gap-2">
                {% for value, label in location_options|default:"US,United States|GB,United Kingdom|EU,Europe|REMOTE,Anywhere" %}
                <label class="cursor-pointer">
                    <input type="checkbox"
                           name="locations"
                           value="{{ value }}"
                           {% if value in profile.location_preferences %}checked{% endif %}
                           class="peer sr-only">
                    <span class="inline-block px-4 py-2 text-sm rounded-full border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">
                        {{ label }}
                    </span>
                </label>
                {% endfor %}
                <label class="cursor-pointer">
                    <input type="checkbox" name="locations" value="US" {% if "US" in profile.location_preferences %}checked{% endif %} class="peer sr-only">
                    <span class="inline-block px-4 py-2 text-sm rounded-full border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">United States</span>
                </label>
                <label class="cursor-pointer">
                    <input type="checkbox" name="locations" value="GB" {% if "GB" in profile.location_preferences %}checked{% endif %} class="peer sr-only">
                    <span class="inline-block px-4 py-2 text-sm rounded-full border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">United Kingdom</span>
                </label>
                <label class="cursor-pointer">
                    <input type="checkbox" name="locations" value="EU" {% if "EU" in profile.location_preferences %}checked{% endif %} class="peer sr-only">
                    <span class="inline-block px-4 py-2 text-sm rounded-full border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">Europe</span>
                </label>
                <label class="cursor-pointer">
                    <input type="checkbox" name="locations" value="REMOTE" {% if "REMOTE" in profile.location_preferences %}checked{% endif %} class="peer sr-only">
                    <span class="inline-block px-4 py-2 text-sm rounded-full border-2 border-gray-200 bg-white peer-checked:border-brand-500 peer-checked:bg-brand-50 hover:bg-gray-50 transition">Anywhere (Remote)</span>
                </label>
            </div>
        </div>

        <div class="flex justify-between items-center pt-4 border-t border-gray-100">
            <a href="{% url 'jobs:impact_wizard_step' 'skills' %}"
               hx-get="{% url 'jobs:impact_wizard_step' 'skills' %}"
               hx-target="#wizard-content"
               hx-swap="innerHTML"
               class="text-gray-500 hover:text-gray-700 font-medium">
                <svg class="inline-block w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path>
                </svg>
                Back
            </a>
            <button type="submit"
                    class="bg-brand-300 hover:bg-brand-400 text-gray-900 font-bold py-3 px-8 rounded-full shadow-lg transition">
                Continue
                <svg class="inline-block w-5 h-5 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
            </button>
        </div>
    </form>
</div>
